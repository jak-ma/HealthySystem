<view class="container">
    <form bindsubmit="submitForm">
        <input name="height" placeholder="请输入身高(cm)" />
        <input name="weight" placeholder="请输入体重(kg)" />
        <input name="bloodPressure" placeholder="请输入血压(mmHg)" />
        <input name="bloodLipid" placeholder="请输入血脂" />
        <input name="bloodOxygen" placeholder="请输入血氧(%)" />
        <!-- 添加选择照片按钮 -->
        <button bindtap="chooseImage">选择体检报告单照片</button>
        <!-- 显示选择的照片 -->
        <view wx:if="{{imagePath}}" class="image-preview">
            <image src="{{imagePath}}" mode="aspectFit" />
        </view>
        <button form-type="submit">
            <icon type="add" size="18" /> 添加
        </button>
    </form>
    <view wx:if="{{advice}}" class="ai-advice">
        <text>AI建议：{{advice}}</text>
    </view>
    <button bindtap="viewHistoryData" class="view-history">
        <icon type="search" size="18" /> 查看历史数据
    </button>
    <!-- 新增按钮，用于切换历史数据的显示和隐藏状态 -->
    <button bindtap="toggleHistoryVisibility" class="toggle-history">
        <icon type="{{isHistoryVisible ? 'cancel' : 'down'}}" size="18" /> {{isHistoryVisible ? '隐藏历史数据' : '展开历史数据'}}
    </button>
    <view wx:if="{{isHistoryVisible && historyData.length > 0}}" class="history-data wide">
        <view wx:for="{{historyData}}" wx:key="*this" class="history-data-item">
            <view class="history-data-label">身高：</view>
            <view class="history-data-value">{{item.height}}cm <text wx:if="{{item.heightStatus}}">({{item.heightStatus}})</text></view>
            <view class="history-data-label">体重：</view>
            <view class="history-data-value">{{item.weight}}kg <text wx:if="{{item.weightStatus}}">({{item.weightStatus}})</text></view>
            <view class="history-data-label">血压：</view>
            <view class="history-data-value">{{item.bloodPressure}}mmHg <text wx:if="{{item.bloodPressureStatus}}">({{item.bloodPressureStatus}})</text></view>
            <view class="history-data-label">血脂：</view>
            <view class="history-data-value">{{item.bloodLipid}} <text wx:if="{{item.bloodLipidStatus}}">({{item.bloodLipidStatus}})</text></view>
            <view class="history-data-label">血氧：</view>
            <view class="history-data-value">{{item.bloodOxygen}}% <text wx:if="{{item.bloodOxygenStatus}}">({{item.bloodOxygenStatus}})</text></view>
        </view>
    </view>
</view>